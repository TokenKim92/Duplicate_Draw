/*! For license information please see duplication.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DuplicateDraw=e():t.DuplicateDraw=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n});class i{#t;#e;#i;#s;#h;#a;constructor(t=!1){this.#t=document.createElement("canvas"),this.#e=this.#t.getContext("2d"),document.body.append(this.#t),this.#i=window.devicePixelRatio>1?2:1,this.#a=t,this.#a&&this.#t.classList.add("canvas-full")}resize(t=0,e=0){this.#s=0===t?document.body.clientWidth:t,this.#h=0===e?document.body.clientHeight:e,this.#t.width=this.#s*this.#i,this.#t.height=this.#h*this.#i,this.#e.scale(this.#i,this.#i)}clearCanvas(){this.#e.clearRect(0,0,this.#s,this.#h)}animateTarget(t,...e){return t(this.#e,...e)}saveCanvas(){this.#e.save()}restoreCanvas(){this.#e.restore()}addEventToCanvas(t,e){this.#t.addEventListener(t,e)}removeEventFromCanvas(t,e){this.#t.removeEventListener(t,e)}bringToStage(){document.body.append(this.#t)}removeFromStage(){this.clearCanvas(),document.body.removeChild(this.#t)}fill(){this.#e.fill()}fillRect(t,e,i,s){this.#e.fillRect(t,e,i,s)}fillText(t,e,i,s){this.#e.fillText(t,e,i,s)}measureText(t){return this.#e.measureText(t)}translate(t,e){this.#e.translate(t,e)}scale(t,e){this.#e.scale(t,e)}rotate(t){this.#e.rotate(t)}beginPath(){this.#e.beginPath()}stroke(){this.#e.stroke()}arc(t,e,i,s,h,a=!1){this.#e.arc(t,e,i,s,h,a)}moveTo(t,e){this.#e.moveTo(t,e)}lineTo(t,e){this.#e.lineTo(t,e)}drawImage(t,e,i,s,h,a,r,n,o){this.#e.drawImage(t,e,i,s,h,a,r,n,o)}getImageData(t,e,i,s,h){return this.#e.getImageData(t,e,i,s,h)}setPosition(t,e){if(this.#a)throw new Error("Positioning is not possible in full screen mode.");this.#t.style.left=`${t}px`,this.#t.style.top=`${e}px`}getFont(){return this.#e.font}setFont(t){return this.#e.font=t}getFillStyle(){return this.#e.fillStyle}setFillStyle(t){this.#e.fillStyle=t}getStrokeStyle(){return this.#e.strokeStyle}setStrokeStyle(t){this.#e.strokeStyle=t}getLineWidth(){return this.#e.lineWidth}setLineWidth(t){this.#e.lineWidth=t}getTextAlign(){return this.#e.textAlign}setTextAlign(t){return this.#e.textAlign=t}getTextBaseline(){return this.#e.textBaseline}setTextBaseline(t){this.#e.textBaseline=t}get stageWidth(){return this.#s}get stageHeight(){return this.#h}get pixelRatio(){return this.#i}}class s{#r;#n;#o;constructor(t,e,i){this.#r=t,this.#n=e,this.#o=i}get width(){return this.#r()}get size(){return this.#r()}get size(){return this.#r()}get font(){return`${this.#r} ${this.#n}px ${this.#o}`}}class h{#c;#g;#r;#l;constructor(t,e,i,s){this.#c=t,this.#g=e,this.#r=i,this.#l=s}get x(){return this.#c}set x(t){this.#c=t}get y(){return this.#g}set y(t){this.#g=t}get width(){return this.#r}set width(t){this.#c=x}get height(){return this.#l}set height(t){this.#l=t}}const a=2*Math.PI;class r extends i{static LINE_COLOR="rgb(0, 0, 0)";static BG_THICKNESS=6;static BG_HALF_THICKNESS=r.BG_THICKNESS/2;static BG_COLOR="rgba(255, 255, 255, 0.9)";static TITLE="GOGH";static SUB_TITLE="Inspired by 'Interactive Developer'";#d;#m;#x;#T;#S;#u;constructor(t,e,i){super(),this.#d=t,this.#m=new h(e.x,0,e.width,e.width*(this.#d.height/this.#d.width)),this.#T=i,this.#S=new s(800,300,"Arial"),this.#u=new s(600,40,"Arial")}resize(){super.resize(),this.#m.y=this.stageHeight,this.#x={x:this.stageWidth/this.#m.width,y:this.stageHeight/this.#m.height}}getImgParticleInfo(){this.drawImage(this.#d,0,0,this.#d.width,this.#d.height,0,0,this.#m.width,this.#m.height);const t=this.getImageData(0,0,this.#m.width,this.#m.height).data;let e,i=[];for(let s=0;s<this.#m.height;s++)for(let h=0;h<this.#m.width;h++)e=4*(h+s*this.#m.width),i.push({x:h*this.#x.x,y:s*this.#x.y,color:`rgb(${t[e]}, ${t[e+1]}, ${t[e+2]})`});return i}drawLineToParticle(t){this.saveCanvas(),this.setStrokeStyle(r.LINE_COLOR),this.beginPath(),this.moveTo(t.x,t.y),this.lineTo(this.#m.x+t.x/this.#x.x,this.#m.y+t.y/this.#x.y),this.stroke(),this.setFillStyle(t.color),this.beginPath(),this.arc(this.#m.x+t.x/this.#x.x,this.#m.y+t.y/this.#x.y,4,0,a),this.fill(),this.restoreCanvas()}drawMovingImage(){this.#R(),this.#p(),this.#F(),this.drawImage(this.#d,0,0,this.#d.width,this.#d.height,this.#m.x,this.#m.y,this.#m.width,this.#m.height),this.#m.y-=this.#T}#R(){this.saveCanvas(),this.setFont(this.#S.font),this.setFillStyle(r.BG_COLOR);const t=this.measureText(r.TITLE);this.fillText(r.TITLE,(this.stageWidth-t.width)/2,(this.stageHeight+t.actualBoundingBoxAscent-t.actualBoundingBoxDescent)/2),this.restoreCanvas()}#p(){this.saveCanvas(),this.setFont(this.#u.font),this.setFillStyle(r.BG_COLOR),this.setTextBaseline("middle");const t=this.measureText(r.SUB_TITLE);this.fillText(r.SUB_TITLE,(this.stageWidth-t.width)/2,50),this.restoreCanvas()}#F(){this.saveCanvas(),this.setFillStyle(r.BG_COLOR),this.fillRect(this.#m.x-r.BG_HALF_THICKNESS,this.#m.y-r.BG_HALF_THICKNESS,this.#m.width+r.BG_THICKNESS,this.#m.height+r.BG_THICKNESS),this.restoreCanvas()}get isDisappeared(){return this.#m.y+1.5*this.#m.height<0}}class n extends i{static MAX_CIRCLES_PER_FRAME=10;static IMG_POS_LEFT=150;static IMAGE_WIDTH=300;static IMAGE_MOVING_SPEED=2;static FPS_SETTING=5;static FPS_TIME_SETTING=1e3/n.FPS_SETTING;static SETTING_VELOCITY=1.03;static MAX_RADIUS=200;static MIN_RADIUS=10;#v;#I;#w;#y;#E;#_;#P;#f;constructor(t){super();const e=new h(n.IMG_POS_LEFT,0,n.IMAGE_WIDTH,0);this.#v=new r(t,e,n.IMAGE_MOVING_SPEED),this.resize(),this.#w=this.#v.getImgParticleInfo(),this.#I=this.#w.length-1,this.init()}init(){this.#y=0,this.#E=1,this.#_=2,this.#P=.2,this.#f=n.MAX_RADIUS}bringToStage(){this.init(),this.resize(),super.bringToStage(),this.#v.bringToStage()}removeFromStage(){this.#v.removeFromStage(),super.removeFromStage()}resize(){super.resize(),this.#v.resize()}animate(t){this.#C(t),this.#F()}#C(t){this.#y||(this.#y=t),t-this.#y>n.FPS_TIME_SETTING&&(this.#y=t,this.#G())}#G(){this.#_*=n.SETTING_VELOCITY,this.#P*=n.SETTING_VELOCITY,this.#f>n.MIN_RADIUS&&(this.#f-=this.#_),this.#E<n.MAX_CIRCLES_PER_FRAME&&(this.#E+=this.#P)}#F(){if(this.#v){this.#v.clearCanvas(),this.#v.drawMovingImage();let t,e=0;for(let i=0;i<this.#E;i++)e=Math.round(Math.random()*this.#I),t=this.#w[e],this.#L(t),this.#v.isDisappeared||this.#v.drawLineToParticle(t)}}#L(t){let e;e=Math.random()*this.#f+n.MIN_RADIUS,this.beginPath(),this.setFillStyle(t.color),this.arc(t.x,t.y,e,0,a),this.fill()}}return e.default})()));